# EmoScan

MVP проекта распознавания эмоций для онлайн-школ.

[Макеты Figma](https://www.figma.com/file/UDO1ksG3vVUUHI131DGGCC/MFDP?type=design&node-id=0%3A1&t=tSmyiOsMtYIueP19-1)

[LeanCanvas](https://www.notion.so/Lean-Canvas-5d9968e55be04d7288cda83e4c5567f6)

[Промежуточный отчет по всем модулям курса MFDP](https://www.notion.so/MFDP-1cdf80efd24241a7ae400dc2f8d2b408)

[Репозиторий для обучения модели распознавания эмоций](https://github.com/starminalush/emoscan_models)

## Краткое описание проекта:
Существует следующая проблема: отток учеников из онлайн школ.

Почему это происходит?
Часто ученику ничего не понятно, и становится грустно и скучно. Преподаватель не всегда может отследить вовремя состояние ученика(особенно на групповых занятиях), и таким образом ученик теряется из процесса. Если он потеряется, то мотивацию возможно потеряет, а значит, не будет продолжать учиться. Из-за того, что ученик забросил учебу и платить за обучение перестал, у самой онлайн-школы понизится прибыль.

Что можно сделать для решения проблеиы?

1. Выявлять «скучающих» или людей с отсутствующим выражением лица и обращать внимание на них, вовлекать в процесс, повторно объяснять.
2. Выявлять «скучающих» подряд на нескольких уроках, потом с ними проводить индивидуальные беседы, так как они в группе риска.
3. Выявлять количество «скучающих» и при превышении какого-либо порога устраивать перемену.
4. Проводить аналитику по преподавателям и темам/занятиям на основе вовлечённости слушателей

В качестве бизнес-метрики выступает churn rate. Можно будет построить графики соотношения предсказанных эмоций(негативных, нейтральных и позитивных) с оттоком пользователей.

В качестве ML-метрики используется F1(общая и по каждому классу) как наиболее подходящая для задачи классификации в условиях несбалансированного датасета.

Таким образом, если мы сможем вовремя и наиболее точно предсказывать настроение(особенно плохое) и сообщать о нем преподавателю, то он сможет вовремя обратить внимание на ученика, у которого каике-то проблемы. В идеале, график соотношения радостных или нейтрально настроенных учеников должен стремиться к бесконечности, а график грустных учеников стремиться в 0. Другими словами, поток новых учеников не должен изменяться, должен измениться уровень оттока уже существующих учеников.

Конкуренты:

1. [Domination](https://domination.one/products/analitycs/litsenziya-na-modul-videoanalitiki-raspoznavanie-pola-vozrasta-emotsiy-domination-n0000131711/).  Цена за 1 канал почти 10к рублей.  Расписано, как именно можно поставить их решение. Но не указано, можно ли синтегрироваться с существующей системой. Нет аналитики, нужно делать самим
2. [Cvizi](https://cvizi.com/language/ru/videoanalitika/). Есть модуль анализа эмоций по видео.Есть аналитика. Нет видеосервера, вместо него микрокомпьютер.Очень дешевые. Есть интеграции с ит-системами заказчика. Из минусов - вся информация на обработку передается в облако, что не гарантирует приватности данных.
3. [Ividion](https://ru.ivideon.com/face-recognition/). Также работает в облаке. Есть аналитика. Можно использовать любые камеры.
    
Конкурентное преимущество EmoScan перед другими компаниями:

 1. Деплой на стороне клиента.
 2. Распознавание эмоций на основе не только лица, но и тона голоса (в процессе).


## Скринкаст
[streamlit-main-2023-07-06-19-07-40.webm](https://github.com/starminalush/mfdp-2023-mvp/assets/103132748/aee55bba-7340-4ca9-b5fd-94856d12a1ff)

## Описание работы сервиса
Схема работы проекта выглядит следующим образом:
![я заглушка для картинки](https://drive.google.com/uc?export=view&id=1wTNY2bv2y_fGYYyXam_VJ_U5RjqPG-j4)

## Документация модулей проекта 
 - [Frontend](https://github.com/starminalush/mfdp-2023-mvp/tree/main/frontend/#readme)
 - [Backend](https://github.com/starminalush/mfdp-2023-mvp/tree/main/backend/#readme)
 - [Model_deployment](https://github.com/starminalush/mfdp-2023-mvp/tree/main/model_deployment/#readme)

## Переменные окружения

| Переменная            |                              Описание                              | Значение по умолчанию |
|-----------------------|:------------------------------------------------------------------:|:---------------------:|
| FRONTEND_PORT         |               Порт для внешнего доступа к фронтенду                |         5017          |
| BACKEND_PORT          |                Порт для внешнего доступа к бекенду                 |         8001          |
| MODEL_DEPLOYMENT_PORT |       Порт для внешнего доступа к сервису с деплоем моделей        |         8000          |
| MINIO_PORT            |                   Порт для внешнего доступа к s3                   |         9005          |
| MINIO_BUCKET          | Имя бакета, где будут лежать картинки от результатов распознавания |         logs          |
| AWS_ACCESS_KEY_ID  |                          ACCESS_KEY от s3                          |           backendminio            |
| AWS_SECRET_ACCESS_KEY| SECRET_KEY от s3 |backendminio|
| POSTGRES_PASSWORD| Пароль от базы данных для сборки контейнера с базой postgres | mysecretpassword|
| POSTGRES_EXTERNAL_PORT| Порт для внешнего доступа к базе | 5411 |


## Запуск
 - Чтобы запустить модули по отдельности см. README.md для каждого модуля
 - Чтобы запустить полностью:
   1. Заполнить backend/.env согласно шаблону backend/.env.template
   2. Заполнить frontend/.env согласно шаблону frontend/.env.template
   3. Заполнить model_deployment/.env согласно шаблону model_deployment/.env.template
   4. Заполнить .env согласно шаблону .env.template
   5. Выаолнить команду
   `sudo docker compose up --build -d`
